<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Visitor Tracker</title>
</head>
<body style="background:#111; color:white; text-align:center; padding-top:3em;">
  <h1>Welcome to My GitHub Page</h1>
  <p>This page logs visitor info to Google Drive for security purposes.</p>

  <script>
    (async () => {
      try {
        // STEP 1: Get visitor info
        const ipInfo = await fetch("https://ipapi.co/json").then(res => res.json());

        const payload = {
          ip: ipInfo.ip,
          city: ipInfo.city,
          region: ipInfo.region,
          country: ipInfo.country_name,
          isp: ipInfo.org || "unknown",
          device: navigator.userAgent,
          page: window.location.href
        };

        // STEP 2: Send to your Google Apps Script webhook
        await fetch("https://script.google.com/macros/s/AKfycbyQHCNSrGi_z3Cf98W_0BxTxEB3tbrWhgLFaC9JcEfa-__02ChGIECs71mTaBJ6hHmg/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        console.log("Visitor info sent to Google Drive.");
      } catch (e) {
        console.error("Visitor logging failed:", e);
      }
    })();
  </script>
</body>
</html>
